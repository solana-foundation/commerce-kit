---
title: E-commerce Integration
description: Complete example of integrating Solana Pay into an online store checkout flow
---

# E-commerce Integration

This guide shows you how to integrate Solana Pay into a complete e-commerce checkout flow. We'll build a product catalog, shopping cart, and payment system.

## Overview

We'll create:
- **Product catalog** with Solana pricing
- **Shopping cart** functionality
- **Checkout flow** with Solana Pay
- **Order management** and tracking
- **Payment verification**

## Complete Example

Here's a full e-commerce integration:

### 1. Product Types & Data

```typescript
// types/product.ts
export interface Product {
  id: string;
  name: string;
  description: string;
  price: number;        // Price in SOL
  image: string;
  category: string;
  inStock: boolean;
}

export interface CartItem {
  product: Product;
  quantity: number;
}

export interface Order {
  id: string;
  items: CartItem[];
  total: number;        // Total in SOL
  customerEmail: string;
  status: 'pending' | 'paid' | 'shipped' | 'completed';
  paymentSignature?: string;
  createdAt: Date;
}
```

### 2. Product Catalog Component

```tsx
// components/ProductCatalog.tsx
import { useState } from 'react';
import { Product, CartItem } from '../types/product';

const SAMPLE_PRODUCTS: Product[] = [
  {
    id: '1',
    name: 'Solana T-Shirt',
    description: 'Premium cotton t-shirt with Solana logo',
    price: 0.05, // 0.05 SOL
    image: '/images/tshirt.jpg',
    category: 'apparel',
    inStock: true
  },
  {
    id: '2',
    name: 'Crypto Coffee Mug',
    description: 'Start your day with some crypto energy',
    price: 0.02, // 0.02 SOL
    image: '/images/mug.jpg',
    category: 'accessories',
    inStock: true
  },
  {
    id: '3',
    name: 'Hardware Wallet',
    description: 'Secure your crypto assets',
    price: 0.5, // 0.5 SOL
    image: '/images/wallet.jpg',
    category: 'hardware',
    inStock: true
  }
];

interface ProductCatalogProps {
  onAddToCart: (product: Product) => void;
}

export function ProductCatalog({ onAddToCart }: ProductCatalogProps) {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {SAMPLE_PRODUCTS.map((product) => (
        <ProductCard 
          key={product.id} 
          product={product} 
          onAddToCart={onAddToCart}
        />
      ))}
    </div>
  );
}

function ProductCard({ product, onAddToCart }: { 
  product: Product; 
  onAddToCart: (product: Product) => void;
}) {
  return (
    <div className="border rounded-lg p-4 shadow-sm">
      <img 
        src={product.image} 
        alt={product.name}
        className="w-full h-48 object-cover rounded-md mb-4"
      />
      <h3 className="font-semibold text-lg">{product.name}</h3>
      <p className="text-gray-600 text-sm mb-2">{product.description}</p>
      <div className="flex justify-between items-center">
        <span className="font-bold text-purple-600">
          {product.price} SOL
        </span>
        <button 
          onClick={() => onAddToCart(product)}
          className="bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700"
          disabled={!product.inStock}
        >
          {product.inStock ? 'Add to Cart' : 'Out of Stock'}
        </button>
      </div>
    </div>
  );
}
```

### 3. Shopping Cart Component

```tsx
// components/ShoppingCart.tsx
import { CartItem } from '../types/product';

interface ShoppingCartProps {
  items: CartItem[];
  onUpdateQuantity: (productId: string, quantity: number) => void;
  onRemoveItem: (productId: string) => void;
  onCheckout: () => void;
}

export function ShoppingCart({ 
  items, 
  onUpdateQuantity, 
  onRemoveItem, 
  onCheckout 
}: ShoppingCartProps) {
  const total = items.reduce(
    (sum, item) => sum + (item.product.price * item.quantity), 
    0
  );

  if (items.length === 0) {
    return (
      <div className="text-center py-8">
        <p className="text-gray-500">Your cart is empty</p>
      </div>
    );
  }

  return (
    <div className="bg-white border rounded-lg p-6">
      <h2 className="text-xl font-semibold mb-4">Shopping Cart</h2>
      
      <div className="space-y-4">
        {items.map((item) => (
          <CartItemRow 
            key={item.product.id}
            item={item}
            onUpdateQuantity={onUpdateQuantity}
            onRemoveItem={onRemoveItem}
          />
        ))}
      </div>
      
      <div className="border-t pt-4 mt-4">
        <div className="flex justify-between items-center mb-4">
          <span className="text-lg font-semibold">Total:</span>
          <span className="text-xl font-bold text-purple-600">
            {total.toFixed(4)} SOL
          </span>
        </div>
        
        <button 
          onClick={onCheckout}
          className="w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 font-semibold"
        >
          Proceed to Checkout
        </button>
      </div>
    </div>
  );
}

function CartItemRow({ 
  item, 
  onUpdateQuantity, 
  onRemoveItem 
}: {
  item: CartItem;
  onUpdateQuantity: (productId: string, quantity: number) => void;
  onRemoveItem: (productId: string) => void;
}) {
  return (
    <div className="flex items-center space-x-4">
      <img 
        src={item.product.image} 
        alt={item.product.name}
        className="w-16 h-16 object-cover rounded"
      />
      
      <div className="flex-1">
        <h4 className="font-medium">{item.product.name}</h4>
        <p className="text-gray-600">{item.product.price} SOL each</p>
      </div>
      
      <div className="flex items-center space-x-2">
        <button 
          onClick={() => onUpdateQuantity(item.product.id, item.quantity - 1)}
          className="w-8 h-8 rounded-full border flex items-center justify-center"
          disabled={item.quantity <= 1}
        >
          -
        </button>
        
        <span className="w-8 text-center">{item.quantity}</span>
        
        <button 
          onClick={() => onUpdateQuantity(item.product.id, item.quantity + 1)}
          className="w-8 h-8 rounded-full border flex items-center justify-center"
        >
          +
        </button>
      </div>
      
      <div className="text-right">
        <p className="font-semibold">
          {(item.product.price * item.quantity).toFixed(4)} SOL
        </p>
        <button 
          onClick={() => onRemoveItem(item.product.id)}
          className="text-red-500 text-sm hover:text-red-700"
        >
          Remove
        </button>
      </div>
    </div>
  );
}
```

### 4. Checkout Component with Solana Pay

```tsx
// components/Checkout.tsx
import { useState } from 'react';
import { SolanaPayButton } from '@solana-commerce/react-sdk';
import { CartItem, Order } from '../types/product';

interface CheckoutProps {
  items: CartItem[];
  onOrderComplete: (order: Order) => void;
  merchantWallet: string;
}

export function Checkout({ items, onOrderComplete, merchantWallet }: CheckoutProps) {
  const [customerEmail, setCustomerEmail] = useState('');
  const [isProcessing, setIsProcessing] = useState(false);
  
  const total = items.reduce(
    (sum, item) => sum + (item.product.price * item.quantity), 
    0
  );
  
  const totalLamports = Math.floor(total * 1_000_000_000); // Convert SOL to lamports
  
  const handlePaymentRequest = (paymentUrl: string) => {
    setIsProcessing(true);
    
    // Create order record
    const order: Order = {
      id: `order_${Date.now()}`,
      items,
      total,
      customerEmail,
      status: 'pending',
      createdAt: new Date()
    };
    
    // Store order (in real app, save to database)
    localStorage.setItem(`order_${order.id}`, JSON.stringify(order));
    
    // Track payment initiation
    console.log('Payment initiated:', {
      orderId: order.id,
      amount: total,
      paymentUrl
    });
  };
  
  const handlePaymentComplete = () => {
    // In a real app, you'd verify the payment on your backend
    // For demo purposes, we'll simulate completion
    
    const order: Order = {
      id: `order_${Date.now()}`,
      items,
      total,
      customerEmail,
      status: 'paid',
      paymentSignature: 'demo_signature_' + Date.now(),
      createdAt: new Date()
    };
    
    onOrderComplete(order);
    setIsProcessing(false);
  };

  return (
    <div className="max-w-md mx-auto bg-white border rounded-lg p-6">
      <h2 className="text-xl font-semibold mb-4">Checkout</h2>
      
      {/* Order Summary */}
      <div className="mb-6">
        <h3 className="font-medium mb-2">Order Summary</h3>
        <div className="space-y-2 text-sm">
          {items.map((item) => (
            <div key={item.product.id} className="flex justify-between">
              <span>
                {item.product.name} × {item.quantity}
              </span>
              <span>
                {(item.product.price * item.quantity).toFixed(4)} SOL
              </span>
            </div>
          ))}
        </div>
        <div className="border-t pt-2 mt-2 flex justify-between font-semibold">
          <span>Total:</span>
          <span>{total.toFixed(4)} SOL</span>
        </div>
      </div>
      
      {/* Customer Information */}
      <div className="mb-6">
        <label className="block text-sm font-medium mb-2">
          Email Address
        </label>
        <input
          type="email"
          value={customerEmail}
          onChange={(e) => setCustomerEmail(e.target.value)}
          className="w-full border rounded-md px-3 py-2"
          placeholder="your@email.com"
          required
        />
      </div>
      
      {/* Payment */}
      <div className="text-center">
        {customerEmail ? (
          <SolanaPayButton
            recipient={merchantWallet}
            amount={totalLamports}
            memo={`Order for ${customerEmail}`}
            buttonText={`Pay ${total.toFixed(4)} SOL`}
            onPaymentRequest={handlePaymentRequest}
            onDialogClose={handlePaymentComplete}
            style={{
              width: '100%',
              backgroundColor: '#9945FF',
              color: 'white',
              border: 'none',
              borderRadius: '8px',
              padding: '12px 24px',
              fontSize: '16px',
              fontWeight: 'bold',
              cursor: 'pointer'
            }}
          />
        ) : (
          <p className="text-gray-500">Please enter your email to continue</p>
        )}
        
        {isProcessing && (
          <p className="text-sm text-purple-600 mt-2">
            Processing payment...
          </p>
        )}
      </div>
    </div>
  );
}
```

### 5. Main Store Component

```tsx
// components/Store.tsx
import { useState } from 'react';
import { Product, CartItem, Order } from '../types/product';
import { ProductCatalog } from './ProductCatalog';
import { ShoppingCart } from './ShoppingCart';
import { Checkout } from './Checkout';
import { OrderConfirmation } from './OrderConfirmation';

const MERCHANT_WALLET = 'BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ';

type View = 'catalog' | 'cart' | 'checkout' | 'confirmation';

export function Store() {
  const [currentView, setCurrentView] = useState<View>('catalog');
  const [cartItems, setCartItems] = useState<CartItem[]>([]);
  const [completedOrder, setCompletedOrder] = useState<Order | null>(null);

  const addToCart = (product: Product) => {
    setCartItems(prev => {
      const existingItem = prev.find(item => item.product.id === product.id);
      
      if (existingItem) {
        return prev.map(item =>
          item.product.id === product.id
            ? { ...item, quantity: item.quantity + 1 }
            : item
        );
      }
      
      return [...prev, { product, quantity: 1 }];
    });
  };

  const updateQuantity = (productId: string, quantity: number) => {
    if (quantity <= 0) {
      removeItem(productId);
      return;
    }
    
    setCartItems(prev =>
      prev.map(item =>
        item.product.id === productId
          ? { ...item, quantity }
          : item
      )
    );
  };

  const removeItem = (productId: string) => {
    setCartItems(prev => prev.filter(item => item.product.id !== productId));
  };

  const handleOrderComplete = (order: Order) => {
    setCompletedOrder(order);
    setCartItems([]);
    setCurrentView('confirmation');
  };

  const cartItemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex justify-between items-center">
            <h1 className="text-2xl font-bold text-purple-600">
              Solana Store
            </h1>
            
            <nav className="flex space-x-4">
              <button
                onClick={() => setCurrentView('catalog')}
                className={`px-4 py-2 rounded-md ${
                  currentView === 'catalog' 
                    ? 'bg-purple-600 text-white' 
                    : 'text-gray-600 hover:text-purple-600'
                }`}
              >
                Products
              </button>
              
              <button
                onClick={() => setCurrentView('cart')}
                className={`px-4 py-2 rounded-md relative ${
                  currentView === 'cart' 
                    ? 'bg-purple-600 text-white' 
                    : 'text-gray-600 hover:text-purple-600'
                }`}
              >
                Cart
                {cartItemCount > 0 && (
                  <span className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                    {cartItemCount}
                  </span>
                )}
              </button>
            </nav>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 py-8">
        {currentView === 'catalog' && (
          <div>
            <h2 className="text-xl font-semibold mb-6">Featured Products</h2>
            <ProductCatalog onAddToCart={addToCart} />
          </div>
        )}

        {currentView === 'cart' && (
          <div className="max-w-2xl mx-auto">
            <ShoppingCart
              items={cartItems}
              onUpdateQuantity={updateQuantity}
              onRemoveItem={removeItem}
              onCheckout={() => setCurrentView('checkout')}
            />
          </div>
        )}

        {currentView === 'checkout' && (
          <Checkout
            items={cartItems}
            onOrderComplete={handleOrderComplete}
            merchantWallet={MERCHANT_WALLET}
          />
        )}

        {currentView === 'confirmation' && completedOrder && (
          <OrderConfirmation 
            order={completedOrder}
            onContinueShopping={() => setCurrentView('catalog')}
          />
        )}
      </main>
    </div>
  );
}
```

### 6. Order Confirmation Component

```tsx
// components/OrderConfirmation.tsx
import { Order } from '../types/product';

interface OrderConfirmationProps {
  order: Order;
  onContinueShopping: () => void;
}

export function OrderConfirmation({ order, onContinueShopping }: OrderConfirmationProps) {
  return (
    <div className="max-w-md mx-auto bg-white border rounded-lg p-6 text-center">
      <div className="mb-6">
        <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg className="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
          </svg>
        </div>
        
        <h2 className="text-xl font-semibold text-green-600 mb-2">
          Payment Successful!
        </h2>
        <p className="text-gray-600">
          Thank you for your purchase. Your order has been confirmed.
        </p>
      </div>

      <div className="bg-gray-50 rounded-lg p-4 mb-6 text-left">
        <h3 className="font-medium mb-2">Order Details</h3>
        <p className="text-sm text-gray-600 mb-2">Order ID: {order.id}</p>
        <p className="text-sm text-gray-600 mb-2">Email: {order.customerEmail}</p>
        
        <div className="space-y-1 text-sm">
          {order.items.map((item) => (
            <div key={item.product.id} className="flex justify-between">
              <span>{item.product.name} × {item.quantity}</span>
              <span>{(item.product.price * item.quantity).toFixed(4)} SOL</span>
            </div>
          ))}
        </div>
        
        <div className="border-t pt-2 mt-2 flex justify-between font-semibold">
          <span>Total Paid:</span>
          <span>{order.total.toFixed(4)} SOL</span>
        </div>
      </div>

      <button
        onClick={onContinueShopping}
        className="w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 font-semibold"
      >
        Continue Shopping
      </button>
    </div>
  );
}
```

## Backend Integration

For production, you'll need backend verification:

```typescript
// api/verify-payment.ts
import { createCommerceClient } from '@solana-commerce/headless-sdk';

export async function verifyPayment(signature: string, expectedAmount: number) {
  const client = createCommerceClient({ network: 'mainnet' });
  
  try {
    const transaction = await client.rpc.getTransaction(signature).send();
    
    if (!transaction) {
      return { verified: false, error: 'Transaction not found' };
    }
    
    // Verify amount, recipient, etc.
    // Implementation depends on your specific requirements
    
    return { verified: true, transaction };
  } catch (error) {
    return { verified: false, error: error.message };
  }
}
```

## Key Features

This e-commerce integration includes:

- **✅ Product catalog** with SOL pricing
- **✅ Shopping cart** functionality
- **✅ Solana Pay checkout** with QR codes
- **✅ Order tracking** and confirmation
- **✅ Mobile-responsive** design
- **✅ TypeScript** for type safety

## Next Steps

- Add **payment verification** on the backend
- Implement **inventory management**
- Add **shipping** calculations
- Set up **webhook notifications**
- Add **order history** for customers

This provides a complete foundation for accepting Solana payments in your e-commerce application! 