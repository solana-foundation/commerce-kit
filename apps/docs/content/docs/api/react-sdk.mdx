---
title: React SDK API Reference
description: Complete API reference for @solana-commerce/react-sdk
---

# React SDK API Reference

Complete API documentation for the `@solana-commerce/react-sdk` package.

## Installation

```bash
bun add @solana-commerce/react-sdk
```

## Components

### `SolanaPayButton`

A complete payment button component that handles Solana Pay integration with a built-in modal dialog.

**Props:**

```typescript
interface SolanaPayButtonProps {
  recipient: string;                    // Required: Solana wallet address
  amount?: number;                     // Optional: Amount in lamports (default: 10000000)
  memo?: string;                       // Optional: Payment memo (default: "Thanks for the support!")
  buttonText?: string;                 // Optional: Button text (default: "Tip with Solana")
  className?: string;                  // Optional: CSS classes for button
  style?: React.CSSProperties;         // Optional: Inline styles
  disabled?: boolean;                  // Optional: Disable button (default: false)
  loading?: boolean;                   // Optional: Show loading state (default: false)
  onPaymentRequest?: (url: string) => void;     // Optional: Callback when payment URL is generated
  onDialogOpen?: () => void;           // Optional: Callback when dialog opens
  onDialogClose?: () => void;          // Optional: Callback when dialog closes
  onError?: (error: Error) => void;    // Optional: Error callback
}
```

**Example:**

```tsx
import { SolanaPayButton } from '@solana-commerce/react-sdk';

function PaymentExample() {
  return (
    <SolanaPayButton 
      recipient="BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ"
      amount={5000000}  // 0.005 SOL
      memo="Coffee purchase"
      buttonText="Buy Coffee â˜•"
      onPaymentRequest={(url) => {
        console.log('Payment URL:', url);
        // Track in analytics, save to database, etc.
      }}
      onDialogOpen={() => {
        console.log('Payment dialog opened');
      }}
      onDialogClose={() => {
        console.log('Payment dialog closed');
      }}
      onError={(error) => {
        console.error('Payment error:', error);
      }}
    />
  );
}
```

**Default Values:**

- `amount`: 10000000 (0.01 SOL)
- `memo`: "Thanks for the support!"
- `buttonText`: "Tip with Solana"
- `disabled`: false
- `loading`: false

**Styling:**

The component accepts both `className` and `style` props for customization:

```tsx
<SolanaPayButton 
  recipient="YOUR_WALLET"
  className="my-custom-button"
  style={{
    backgroundColor: '#9945FF',
    color: 'white',
    border: 'none',
    borderRadius: '8px',
    padding: '12px 24px',
    fontSize: '16px',
    fontWeight: 'bold',
    cursor: 'pointer'
  }}
/>
```

---

## Hooks

### `useSolanaPayment`

A custom hook for managing Solana Pay interactions without UI components.

**Parameters:**

```typescript
interface UseSolanaPaymentParams {
  recipient: string;
  amount?: number;
  memo?: string;
}
```

**Returns:**

```typescript
interface UseSolanaPaymentReturn {
  paymentUrl: string | null;
  isGenerating: boolean;
  error: Error | null;
  generatePaymentUrl: () => void;
  clearError: () => void;
}
```

**Example:**

```tsx
import { useSolanaPayment } from '@solana-commerce/react-sdk';

function CustomPaymentComponent() {
  const {
    paymentUrl,
    isGenerating,
    error,
    generatePaymentUrl,
    clearError
  } = useSolanaPayment({
    recipient: 'BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ',
    amount: 1000000,
    memo: 'Custom payment'
  });

  return (
    <div>
      <button 
        onClick={generatePaymentUrl}
        disabled={isGenerating}
      >
        {isGenerating ? 'Generating...' : 'Generate Payment'}
      </button>
      
      {error && (
        <div>
          Error: {error.message}
          <button onClick={clearError}>Clear</button>
        </div>
      )}
      
      {paymentUrl && (
        <div>
          <p>Payment URL: {paymentUrl}</p>
          <QRCodeComponent value={paymentUrl} />
        </div>
      )}
    </div>
  );
}
```

### `usePaymentDialog`

Hook for managing payment dialog state.

**Returns:**

```typescript
interface UsePaymentDialogReturn {
  isOpen: boolean;
  open: () => void;
  close: () => void;
  toggle: () => void;
}
```

**Example:**

```tsx
import { usePaymentDialog } from '@solana-commerce/react-sdk';
import { Dialog } from '@solana-commerce/ui-primitives/react';

function PaymentWithCustomDialog() {
  const dialog = usePaymentDialog();

  return (
    <div>
      <button onClick={dialog.open}>
        Make Payment
      </button>
      
      <Dialog open={dialog.isOpen} onClose={dialog.close}>
        <dialog>
          <h2>Payment Required</h2>
          <p>Scan QR code to pay</p>
          <button onClick={dialog.close}>Close</button>
        </dialog>
      </Dialog>
    </div>
  );
}
```

---

## Context Providers

### `SolanaPayProvider`

Context provider for sharing payment configuration across components.

**Props:**

```typescript
interface SolanaPayProviderProps {
  children: React.ReactNode;
  defaultRecipient?: string;
  defaultNetwork?: 'mainnet' | 'devnet' | 'localnet';
  onGlobalPaymentRequest?: (data: PaymentRequestData) => void;
  onGlobalError?: (error: Error) => void;
}

interface PaymentRequestData {
  recipient: string;
  amount: number;
  memo?: string;
  url: string;
}
```

**Example:**

```tsx
import { SolanaPayProvider, SolanaPayButton } from '@solana-commerce/react-sdk';

function App() {
  return (
    <SolanaPayProvider
      defaultRecipient="BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ"
      defaultNetwork="mainnet"
      onGlobalPaymentRequest={(data) => {
        // Track all payments globally
        analytics.track('payment_initiated', data);
      }}
      onGlobalError={(error) => {
        // Handle all payment errors globally
        console.error('Payment error:', error);
      }}
    >
      <PaymentPage />
    </SolanaPayProvider>
  );
}

function PaymentPage() {
  return (
    <div>
      {/* This button inherits the default recipient */}
      <SolanaPayButton amount={1000000} memo="Coffee" />
      
      {/* This button overrides the default */}
      <SolanaPayButton 
        recipient="OTHER_WALLET_ADDRESS"
        amount={2000000}
        memo="Tea"
      />
    </div>
  );
}
```

### `useSolanaPayContext`

Hook to access the Solana Pay context.

**Returns:**

```typescript
interface SolanaPayContextValue {
  defaultRecipient?: string;
  defaultNetwork: 'mainnet' | 'devnet' | 'localnet';
  onGlobalPaymentRequest?: (data: PaymentRequestData) => void;
  onGlobalError?: (error: Error) => void;
}
```

**Example:**

```tsx
import { useSolanaPayContext } from '@solana-commerce/react-sdk';

function PaymentInfo() {
  const { defaultRecipient, defaultNetwork } = useSolanaPayContext();
  
  return (
    <div>
      <p>Default Recipient: {defaultRecipient}</p>
      <p>Network: {defaultNetwork}</p>
    </div>
  );
}
```

---

## Utility Components

### `PaymentQRCode`

Component for displaying QR codes for Solana Pay URLs.

**Props:**

```typescript
interface PaymentQRCodeProps {
  paymentUrl: string;
  size?: number;                // QR code size in pixels (default: 256)
  className?: string;           // CSS classes
  style?: React.CSSProperties;  // Inline styles
  onError?: (error: Error) => void;
}
```

**Example:**

```tsx
import { PaymentQRCode, useSolanaPayment } from '@solana-commerce/react-sdk';

function QRPayment() {
  const { paymentUrl, generatePaymentUrl } = useSolanaPayment({
    recipient: 'BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ',
    amount: 1000000
  });

  React.useEffect(() => {
    generatePaymentUrl();
  }, []);

  return (
    <div>
      {paymentUrl && (
        <PaymentQRCode 
          paymentUrl={paymentUrl}
          size={300}
          className="qr-code"
        />
      )}
    </div>
  );
}
```

### `PaymentStatus`

Component for displaying payment status with real-time updates.

**Props:**

```typescript
interface PaymentStatusProps {
  transactionSignature?: string;
  network?: 'mainnet' | 'devnet' | 'localnet';
  onStatusChange?: (status: PaymentStatus) => void;
  pollInterval?: number;        // Polling interval in ms (default: 2000)
}

type PaymentStatus = 'pending' | 'confirmed' | 'failed' | 'unknown';
```

**Example:**

```tsx
import { PaymentStatus } from '@solana-commerce/react-sdk';

function PaymentTracker({ signature }: { signature: string }) {
  return (
    <PaymentStatus 
      transactionSignature={signature}
      network="mainnet"
      onStatusChange={(status) => {
        if (status === 'confirmed') {
          console.log('Payment confirmed!');
        }
      }}
    />
  );
}
```

---

## Type Definitions

### Component Props

```typescript
// Main button component props
interface SolanaPayButtonProps {
  recipient: string;
  amount?: number;
  memo?: string;
  buttonText?: string;
  className?: string;
  style?: React.CSSProperties;
  disabled?: boolean;
  loading?: boolean;
  onPaymentRequest?: (url: string) => void;
  onDialogOpen?: () => void;
  onDialogClose?: () => void;
  onError?: (error: Error) => void;
}

// QR code component props
interface PaymentQRCodeProps {
  paymentUrl: string;
  size?: number;
  className?: string;
  style?: React.CSSProperties;
  onError?: (error: Error) => void;
}

// Payment status component props
interface PaymentStatusProps {
  transactionSignature?: string;
  network?: 'mainnet' | 'devnet' | 'localnet';
  onStatusChange?: (status: PaymentStatus) => void;
  pollInterval?: number;
}
```

### Hook Returns

```typescript
// useSolanaPayment hook return type
interface UseSolanaPaymentReturn {
  paymentUrl: string | null;
  isGenerating: boolean;
  error: Error | null;
  generatePaymentUrl: () => void;
  clearError: () => void;
}

// usePaymentDialog hook return type
interface UsePaymentDialogReturn {
  isOpen: boolean;
  open: () => void;
  close: () => void;
  toggle: () => void;
}
```

### Context Types

```typescript
// Provider props
interface SolanaPayProviderProps {
  children: React.ReactNode;
  defaultRecipient?: string;
  defaultNetwork?: 'mainnet' | 'devnet' | 'localnet';
  onGlobalPaymentRequest?: (data: PaymentRequestData) => void;
  onGlobalError?: (error: Error) => void;
}

// Context value
interface SolanaPayContextValue {
  defaultRecipient?: string;
  defaultNetwork: 'mainnet' | 'devnet' | 'localnet';
  onGlobalPaymentRequest?: (data: PaymentRequestData) => void;
  onGlobalError?: (error: Error) => void;
}

// Payment request data
interface PaymentRequestData {
  recipient: string;
  amount: number;
  memo?: string;
  url: string;
}
```

### Enums

```typescript
type PaymentStatus = 'pending' | 'confirmed' | 'failed' | 'unknown';
type Network = 'mainnet' | 'devnet' | 'localnet';
```

---

## Advanced Usage

### Custom Payment Flow

```tsx
import React, { useState } from 'react';
import { 
  SolanaPayProvider, 
  useSolanaPayment, 
  PaymentQRCode,
  PaymentStatus 
} from '@solana-commerce/react-sdk';

function AdvancedPaymentFlow() {
  const [step, setStep] = useState<'amount' | 'payment' | 'confirmation'>('amount');
  const [amount, setAmount] = useState(1000000);
  const [signature, setSignature] = useState<string | null>(null);

  const {
    paymentUrl,
    isGenerating,
    generatePaymentUrl
  } = useSolanaPayment({
    recipient: 'BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ',
    amount,
    memo: `Payment of ${amount / 1_000_000_000} SOL`
  });

  const handleAmountSubmit = () => {
    generatePaymentUrl();
    setStep('payment');
  };

  const handlePaymentComplete = (txSignature: string) => {
    setSignature(txSignature);
    setStep('confirmation');
  };

  return (
    <div>
      {step === 'amount' && (
        <div>
          <h2>Select Amount</h2>
          <input 
            type="number" 
            value={amount} 
            onChange={(e) => setAmount(Number(e.target.value))}
            placeholder="Amount in lamports"
          />
          <button onClick={handleAmountSubmit}>Continue</button>
        </div>
      )}

      {step === 'payment' && (
        <div>
          <h2>Scan to Pay</h2>
          {isGenerating ? (
            <p>Generating payment...</p>
          ) : paymentUrl ? (
            <PaymentQRCode paymentUrl={paymentUrl} size={300} />
          ) : (
            <p>Failed to generate payment URL</p>
          )}
          <button onClick={() => setStep('amount')}>Back</button>
        </div>
      )}

      {step === 'confirmation' && signature && (
        <div>
          <h2>Payment Status</h2>
          <PaymentStatus 
            transactionSignature={signature}
            onStatusChange={(status) => {
              if (status === 'confirmed') {
                console.log('Payment confirmed!');
              }
            }}
          />
        </div>
      )}
    </div>
  );
}
```

### Integration with State Management

```tsx
import React from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { SolanaPayButton } from '@solana-commerce/react-sdk';

function ReduxIntegratedPayment() {
  const dispatch = useDispatch();
  const { cart, user } = useSelector(state => state);

  const totalAmount = cart.items.reduce(
    (sum, item) => sum + item.price * item.quantity, 
    0
  );

  return (
    <SolanaPayButton
      recipient={user.merchantWallet}
      amount={totalAmount * 1_000_000_000} // Convert to lamports
      memo={`Order ${cart.id}`}
      onPaymentRequest={(url) => {
        dispatch({
          type: 'PAYMENT_INITIATED',
          payload: { cartId: cart.id, paymentUrl: url }
        });
      }}
      onDialogClose={() => {
        dispatch({
          type: 'PAYMENT_COMPLETED',
          payload: { cartId: cart.id }
        });
      }}
    />
  );
}
```

---

## Testing

### Test Utilities

The React SDK provides testing utilities for unit tests:

```tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { SolanaPayButton, SolanaPayProvider } from '@solana-commerce/react-sdk';

// Mock provider for testing
export function MockSolanaPayProvider({ children }) {
  return (
    <SolanaPayProvider
      defaultRecipient="test-wallet-address"
      defaultNetwork="devnet"
    >
      {children}
    </SolanaPayProvider>
  );
}

// Example test
test('renders payment button with correct text', () => {
  render(
    <MockSolanaPayProvider>
      <SolanaPayButton 
        recipient="test-address"
        buttonText="Test Payment"
      />
    </MockSolanaPayProvider>
  );
  
  expect(screen.getByText('Test Payment')).toBeInTheDocument();
});

test('calls onPaymentRequest when button is clicked', () => {
  const mockPaymentRequest = jest.fn();
  
  render(
    <MockSolanaPayProvider>
      <SolanaPayButton 
        recipient="test-address"
        onPaymentRequest={mockPaymentRequest}
      />
    </MockSolanaPayProvider>
  );
  
  fireEvent.click(screen.getByRole('button'));
  expect(mockPaymentRequest).toHaveBeenCalled();
});
```

---

## Migration Guide

### From Basic Implementation

If you're migrating from a basic implementation:

**Before:**
```tsx
// Manual implementation
function PaymentButton() {
  const [showModal, setShowModal] = useState(false);
  
  const handleClick = () => {
    // Manual Solana Pay URL generation
    const url = `solana:${recipient}?amount=${amount}&memo=${memo}`;
    setShowModal(true);
  };

  return (
    <>
      <button onClick={handleClick}>Pay</button>
      {showModal && <PaymentModal />}
    </>
  );
}
```

**After:**
```tsx
// Using React SDK
import { SolanaPayButton } from '@solana-commerce/react-sdk';

function PaymentButton() {
  return (
    <SolanaPayButton 
      recipient={recipient}
      amount={amount}
      memo={memo}
      buttonText="Pay"
    />
  );
}
```

---

## Support

- **GitHub Issues**: [Report bugs and request features](https://github.com/your-org/solana-commerce/issues)
- **Documentation**: [Complete guides and examples](/docs)
- **TypeScript**: Full type definitions included
- **Testing**: Jest and React Testing Library compatible 