---
title: Headless SDK
description: Core blockchain functionality and Solana Pay utilities for any JavaScript environment
---

# Headless SDK

The `@solana-commerce/headless-sdk` package provides the core functionality for integrating Solana Pay into your applications. It's framework-agnostic and works in any JavaScript environment.

## Features

- **Solana Pay URL Generation** - Create standard Solana Pay URLs
- **Blockchain Client** - Connect to Solana networks (mainnet, devnet, localnet)
- **Payment Verification** - Verify transaction completion
- **Transaction Building** - Build and send transactions
- **TypeScript Support** - Full type safety out of the box

## Installation

```bash
bun add @solana-commerce/headless-sdk
```

## Quick Start

### Creating Solana Pay Requests

The most common use case is generating Solana Pay URLs:

```typescript
import { createSolanaPayRequest } from '@solana-commerce/headless-sdk';

const paymentRequest = createSolanaPayRequest({
  recipient: 'BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ',
  amount: 1000000, // 0.001 SOL (amount in lamports)
  memo: 'Coffee payment'
});

console.log(paymentRequest.url);
// Output: solana:BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ?amount=1000000&memo=Coffee%20payment
```

### Blockchain Client

Connect to the Solana blockchain and interact with it:

```typescript
import { createCommerceClient, getBalance } from '@solana-commerce/headless-sdk';

// Create a client
const client = createCommerceClient({
  network: 'devnet', // or 'mainnet', 'localnet'
  // rpcUrl: 'https://custom-rpc-url.com' // optional custom RPC
});

// Check account balance
const balance = await getBalance(client, 'BQWWFhzBdw2vKKBUX17NHeFbCoFQHfRARpdztPE2tDJ');
console.log(`Balance: ${balance} lamports`);
```

## API Reference

### `createSolanaPayRequest(params)`

Creates a Solana Pay URL according to the official specification.

**Parameters:**

```typescript
interface CreateSolanaPayRequestParams {
  recipient: string;    // Solana wallet address
  amount: number;       // Amount in lamports
  memo?: string;        // Optional memo text
}
```

**Returns:**

```typescript
interface SolanaPayRequest {
  url: string;          // Complete Solana Pay URL
  recipient: string;    // Recipient address
  amount: number;       // Amount in lamports
  memo?: string;        // Memo if provided
}
```

### `createCommerceClient(config)`

Creates a blockchain client for interacting with Solana networks.

**Parameters:**

```typescript
interface SolanaClientConfig {
  network: "mainnet" | "devnet" | "localnet";
  rpcUrl?: string;      // Optional custom RPC URL
}
```

**Returns:**

```typescript
interface CommerceClient {
  rpc: any;                    // RPC client instance
  sendAndConfirmTransaction: any; // Transaction sender
  network: string;             // Current network
}
```

### `getBalance(client, address)`

Gets the SOL balance for a given address.

**Parameters:**
- `client: CommerceClient` - Blockchain client instance
- `address: string` - Solana wallet address

**Returns:** `Promise<number>` - Balance in lamports

## Error Handling

The SDK includes comprehensive error handling:

```typescript
import { createSolanaPayRequest, createCommerceClient } from '@solana-commerce/headless-sdk';

try {
  const request = createSolanaPayRequest({
    recipient: 'invalid-address',
    amount: 1000000
  });
} catch (error) {
  console.error('Invalid recipient address:', error.message);
}

try {
  const client = createCommerceClient({ network: 'devnet' });
  const balance = await getBalance(client, 'some-address');
} catch (error) {
  console.error('Network error:', error.message);
}
```

## Advanced Usage

### Custom RPC Endpoints

Use your own RPC endpoint for better performance:

```typescript
const client = createCommerceClient({
  network: 'mainnet',
  rpcUrl: 'https://my-custom-rpc.solana.com'
});
```

### Environment-Specific Configuration

Configure different networks based on your environment:

```typescript
const network = process.env.NODE_ENV === 'production' ? 'mainnet' : 'devnet';

const client = createCommerceClient({ network });
```

## Integration Examples

### E-commerce Integration

```typescript
import { createSolanaPayRequest } from '@solana-commerce/headless-sdk';

class CheckoutService {
  static generatePaymentURL(orderTotal: number, customerWallet: string) {
    const lamports = orderTotal * 1000000000; // Convert SOL to lamports
    
    return createSolanaPayRequest({
      recipient: process.env.MERCHANT_WALLET,
      amount: lamports,
      memo: `Order #${Date.now()}`
    });
  }
}

// Usage
const payment = CheckoutService.generatePaymentURL(0.05, customerAddress);
```

### Payment Verification

```typescript
import { createCommerceClient } from '@solana-commerce/headless-sdk';

class PaymentVerifier {
  private client = createCommerceClient({ network: 'mainnet' });

  async verifyPayment(signature: string) {
    try {
      const transaction = await this.client.rpc.getTransaction(signature).send();
      return transaction ? 'confirmed' : 'pending';
    } catch (error) {
      return 'failed';
    }
  }
}
```

## Next Steps

- [React SDK](/docs/react-sdk) - Use pre-built React components
- [UI Primitives](/docs/ui-primitives) - Add UI components to your app
- [API Reference](/docs/api/headless-sdk) - Complete API documentation 